
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/logo-192.png">
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="single-page-icon.png">
    <meta name="theme-color" content="#536878">
    <title>politIQ</title>
    <link href="https://fonts.googleapis.com/css?family=Baloo+Bhaina|Quicksand:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
        font-family: 'Quicksand', 'cursive';
      }
      .App {
        text-align: center;
      }
      .App-header {
        background-color: #222;
        height: 150px;
        padding: 20px;
        color: white;
      }
      .App-intro {
        font-size: large;
      }
      #main {
        color: #a54ee8;
        /* filter: drop-shadow(0.5em 0em 0.69em #a54ee8); */
        font-size: 3.2em;
        letter-spacing: 2px;
        text-shadow: -0.02em 0em 0.69em #a54ee8;
        margin-top: 1vh;
        margin-bottom: 5vh;
        line-height: 80%;
        font-weight: bold;
        font-family: 'Quicksand', 'cursive';
        /* font-family: 'Baloo Bhaina', cursive; */
        margin-top: 10vh;
      }
      #iq {
        color: white;
      }
    </style>
  </head>
  <body>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <div id="root">
      <div class="App">
        <h1 id="main">WELCOME TO POLIT<span id="iq">IQ</span></h1>
        <h2>Are you smarter than a Democrat? Republican? Independent?</h2>
        <p class="App-intro">
          Loading site...
        </p>
        <img src="./loadingGif.gif" alt="loading" />

    </div>
    <script>
      // console.log('this file is running')

      // if ('serviceWorker' in navigator && 'PushManager' in window) {
      //     console.log('Service Worker and Push is supported')
      //     navigator.serviceWorker.register('service-worker.js')
      //       .then(function(registration) {
      //         console.log('ServiceWorker registration successful with scope: ', registration.scope)
      //         if (Notification.permission == 'default') {
      //           // ask permissions to send notifications
      //           askPermission()
      //         }
      //         swRegistration = registration;
      //       })
      //       .catch(function(err) {
      //         console.error('Service Worker registration failed: ', err)
      //       });
      //   } else if ('serviceWorker' in navigator) {
      //     console.warn('Push messaging is not supported');
      //     // pushButton.textContent = 'Push Not Supported';
      //     window.addEventListener('load', function() {
      //       navigator.serviceWorker.register('service-worker.js').then(function(registration) {
      //         // Registration was successful
      //         console.log('ServiceWorker registration successful with scope: ', registration.scope);
      //       }, function(err) {
      //         // registration failed :(
      //         console.error('ServiceWorker registration failed: ', err);
      //       }).catch(function(err) {
      //         console.log(err)
      //       });
      //     });
      //   } else {
      //     console.warn('service worker and push messaging are not supported');
      //   }

      //   const CACHE_NAME = 'politIQ-cache-v1';
      //   const urlsToCache = [
      //     '/',
      //     '/scripts/build.js',
      //   ];
        
      //   self.addEventListener('install', function(event) {
      //     event.waitUntil(
      //       caches.open(CACHE_NAME)
      //         .then(function(cache) {
      //           // open a cache and cache our files 
      //           return cache.addAll(urlsToCache);
      //         })
      //     )
      //   });

      //   self.addEventListener('fetch', function(event) {
      //     console.log(event.request.url);
      //     event.respondWith(
      //       caches.match(event.request).then(function(response) {
      //         return response || fetch(event.request);
      //       })
      //     )
      //   })

      //   function askPermission() {
      //     return new Promise(function (resolve,reject) {
      //       const permissionResult = Notification.requestPermission(function(result) {
      //         resolve(result);
      //         if (result === 'granted') {
      //           subscribeUser();
      //         }
      //       });

      //       if (permissionResult) {
      //         permissionResult.then(resolve, reject);
      //       }
      //     }).then(function(permissionResult) {
      //       if (permissionResult !== 'granted') {
      //         throw new Error('Not granted permission for push notifications')
      //       }
      //     })
      //   }

      //   function subscribeUser() {
      //     const applicationServerKey = urlBase64ToUint8Array('BPDJiG_LBy1OmhPwA1N2APrliu8vD2ERB5VEsSAM46m7aQMFbiiyfqfPW0BCEgpy3aLpz6rKyOgvjj2_CJXlTqU');
      //     // console.log(process.env.REACT_APP_MESSAGING_KEY);
      //     const options = {
      //       userVisibleOnly: true,
      //       applicationServerKey,
      //     }
      //     console.log('subscribe user is being called')
      //     return swRegistration.pushManager.subscribe(options)
      //       .then(function(subscription) {
      //         console.log(subscription)
      //         // sendSubscriptionToBackEnd(subscription)
      //       }).catch(function(err) {
      //         console.log('Failed to subscribe user: ', err);
      //       });
      //   }

      //   function urlBase64ToUint8Array(base64string) {
      //     const padding = '='.repeat((4-base64string.length % 4) % 4);
      //     const base64 = (base64string + padding).replace(/\-/g, '+').replace(/_/g, '/');
      //     const rawData = window.atob(base64);
      //     const outputArray = new Uint8Array(rawData.length);

      //     for (let i = 0; i < rawData.length; i++) {
      //       outputArray[i] = rawData.charCodeAt(i);
      //     }

      //     return outputArray;
      //   }
    </script>
  </body>
</html>
